<script>
buscar_localidades = function() {
	id = $("select.distrito-selector").val();
   	localidad_select = $("select.localidad-selector").first();
   	localidad_select.empty();
   	$.getJSON("{{ path('localidad_find_by_distrito') }}", { distrito_id : id} , function(data) {
   		if (data.length > 0) {
	   		for (var i=0; i<data.length; i++) 
	   			localidad_select.append("<option value="+data[i].id+">"+data[i].nombre+"</option>");
	   		localidad_select.removeAttr("disabled");	
	   	}
	});
};
  $(document).ready(function() {
		$(".distrito-selector").change(buscar_localidades);
		});
</script>
 {% if (form.escuela.distrito is defined) %}
 	{{form_row(form.escuela.distrito) }}
  {% elseif (form.usuario.distrito is defined) %}
  	{{form_row(form.usuario.distrito) }}
   {% else %}
	<script>
	  $(document).ready(function() {
		$(".distrito-selector").trigger("change");
	 });
	 </script>

	<div>
	 	<label for="distrito" class="required">Distrito</label> 
		<select id="distrito" name="distrito" class="distrito-selector">
			<option value="-1" selected>Seleccione un distrito ...</option> 
	        {% for distrito in distritos  %}
	           <option value="{{distrito.id}}">{{distrito.nombre}}</option>
	   		{% endfor %}
		</select>
	</div>

 {% endif %}
 
 {% if (form.escuela.localidad is defined) %}
	{{ form_row(form.escuela.localidad) }}
{% endif %}

